# Colour-Tracking
openmv色块追踪，自动获取阈值，当视野中出现多个色块时，可以固定一个追踪。

固定跟踪原理：
将上一帧的追踪对象的中心坐标（old_x,old_y）与检测到的三个最大色块的中心坐标做差得distance，追踪与上一个距离最小的色块。

运行流程：  
1、自动获取视野中心方块内颜色阈值。  
2、视野内找面积大于100的色块，留面积最大的三个存入列表blobs。  
3.若第一次运行程序，上一个色块取当前视野的最大色块blobs[0]。  
4.取distance最小值为mis_dis，此色块的下表记做candi（candidate缩写）。
5.若mis_dis > DISTANCE_THRESHOLD（最大距离阈值）,即当前色块距上一个相差过大，则认为摄像头没拍到（超出视野，或光线问题）。等待50帧。  
6。若mis_dis < MOVE_THRESHOLD(最小移动阈值)，即当前色块距离上一个相差过小，则继续保持上一个坐标不动，以消抖稳定。  
7。否则，返回当前坐标值，画出十字。(old_x,old_y)更新为当前坐标，为下一帧做参考。  
8。根据坐标值与视野中心差值，PID输出云台舵机目标角度，调整摄像头姿态，以保持目标色块处于视野中心位置。  
